<h3>Typing Test</h3>
<p id="text">The quick brown fox jumps over the lazy dog.</p>
<textarea id="input" oninput="checkTyping()" rows="4" cols="50"></textarea><br>

<form action="/submit" method="post">
  <input type="hidden" name="name" value="{{ name }}">
  <input type="hidden" name="email" value="{{ email }}">
  <input type="hidden" name="phone" value="{{ phone }}">
  <input type="hidden" id="wpm" name="wpm">
  <input type="hidden" id="accuracy" name="accuracy">
  <button type="submit">Submit Test</button>
</form>

<script>
let startTime = Date.now();
function checkTyping() {
  const original = document.getElementById('text').innerText;
  const typed = document.getElementById('input').value;
  const words = typed.trim().split(/\s+/).length;
  const timeTaken = (Date.now() - startTime) / 60000;
  const wpm = Math.round(words / timeTaken);
  const correctChars = [...typed].filter((c, i) => c === original[i]).length;
  const accuracy = Math.round((correctChars / original.length) * 100);
  document.getElementById('wpm').value = wpm;
  document.getElementById('accuracy').value = accuracy;
}
</script>